"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createRouteFilter;

var _paths = require("../paths");

var _takeshapeRouting = require("takeshape-routing");

var _stats = require("../stats");

function createRouteFilter(config, stats) {
  return function (obj, routeName) {
    const route = (0, _paths.getIn)(config.routes, routeName);
    let path;

    if (route && route.path) {
      const pathResult = (0, _takeshapeRouting.formatPath)(route.path, obj);
      path = (0, _paths.joinPath)(config.pathPrefix, pathResult.path);

      if (pathResult.warnings.length) {
        const currentPath = this.lookup('currentPath');
        pathResult.warnings.forEach(variable => {
          (0, _stats.generateWarning)(stats, 'route-filter', `${currentPath} - failed to create '${routeName}' page - :${variable} resolves to undefined`);
        });
      }
    } else {
      path = '#';
    }

    return path;
  };
}
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = linkedCommand;

var _auth = require("../auth");

function linkedCommand(handler) {
  return (command, params) => {
    if (!params.projectId) {
      console.error('Error: TakeShape not initialized please run `tsg init`.');
      process.exit(1);
    }

    const {
      isValid,
      error
    } = (0, _auth.verifyAuth)(params.authToken);

    if (!isValid) {
      console.error(`Error: authToken is ${error}. Please run 'tsg init' to generate new token.`);
      process.exit(1);
    }

    return handler(command, params);
  };
}